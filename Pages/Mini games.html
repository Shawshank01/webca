<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="../CSS/styles.css"  rel="stylesheet">
    <title>Car Dodger Game</title>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-1">
            <a href="../index.html">
            <img src="../Images/logo.png" class="img-fluid">
            </a>
            </div>
        </div>
        <div class="row">
            <div>
                <h1 class="text-center"><b>Motor Legacy Ireland</b></h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2">
                <a class="link" href="../index.html">
                    <div class="navi">
                        <p>Home Page</p>
                    </div>
                </a>
            </div>
        
            <div class="col-md-2">
                <a class="link" href="./Cars.html">
                    <div class="navi">
                        <p>Cars</p>
                    </div>
                </a>
            </div>
            <div class="col-md-2">
                <a class="link" href="./Buy-car.html">
                    <div class="navi">
                        <p>Buy Car</p>
                    </div>
                </a>
            </div>
            <div class="col-md-2">
                <a class="link" href="./About-us.html">
                    <div class="navi">
                        <p>About Us</p>
                    </div>
                </a>
            </div>
            <div class="col-md-2">
                <a class="link" href="./Contact-us.html">
                    <div class="navi">
                       <p>Contact Us</p>
                    </div>
                </a>
            </div>
            <div class="col-md-2">
                <a class="link" href="./Mini games.html">
                    <div class="navi">
                        <p>Don't Crash</p>
                    </div>
                </a>
            </div>
        </div>
        <div class="row">
            <img src="../Images/Car_index.jpg">
        </div>
    </div>
    <div class="container game-container">
        <div class="row">
            <div class="col-12">
                <canvas id="gameCanvas" width="400" height="600" style="border: 1px solid #000;"></canvas>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <button class="btn btn-primary" onclick="startGame()">Start Game</button>
                <p>Score: <span id="score">0</span></p>
                <select class="form-control" id="carSelect" onchange="changeCar()">
                    <option value="🚗">Car 1</option>
                    <option value="🚙">Car 2</option>
                    <option value="🏎️">Car 3</option>
                </select>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <hr>
            <footer>
                <p> &#169; Copyright 2023. All Rights Reserved.</p>
            </footer>
        </div>
    </div>
    <script>
        let canvas, ctx, car, obstacles, score, gameInterval;
    
        function startGame() {
            canvas = document.getElementById("gameCanvas");
            ctx = canvas.getContext("2d");
    
            // Adjust canvas size based on screen width
            canvas.width = window.innerWidth * 0.8;
            canvas.height = window.innerHeight * 0.8;
    
            car = { x: canvas.width / 2 - 20, y: canvas.height - 50, width: 40, height: 40, symbol: "🚗" };
            obstacles = [];
            score = 0;
    
            document.getElementById("score").innerText = score;
    
            gameInterval = setInterval(updateGame, 20);
    
            // Listen for mouse movements
            canvas.addEventListener("mousemove", moveCar);
    
            // Disable the start button
            document.querySelector("button").disabled = true;
        }
    
        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
    
            // Draw car
            ctx.font = "30px Arial";
            ctx.fillText(car.symbol, car.x, car.y);
    
            // Draw obstacles
            for (let i = 0; i < obstacles.length; i++) {
                ctx.fillText("🚧", obstacles[i].x, obstacles[i].y);
                obstacles[i].y += 2; // Adjust obstacle speed
                if (collision(car, obstacles[i])) {
                    endGame();
                    return;
                }
                if (obstacles[i].y > canvas.height) {
                    score++;
                    document.getElementById("score").innerText = score;
                    obstacles.splice(i, 1);
                    i--;
                }
            }
    
            // Generate random obstacles
            if (Math.random() < 0.02) {
                let obstacleX = Math.random() * (canvas.width - 40);
                let obstacleY = -40;
                obstacles.push({ x: obstacleX, y: obstacleY, width: 40, height: 40 });
            }
        }
    
        function moveCar(event) {
            car.x = event.clientX - canvas.getBoundingClientRect().left - car.width / 2;
            if (car.x < 0) {
                car.x = 0;
            } else if (car.x > canvas.width - car.width) {
                car.x = canvas.width - car.width;
            }
        }
    
        function collision(obj1, obj2) {
            return (
                obj1.x < obj2.x + obj2.width &&
                obj1.x + obj1.width > obj2.x &&
                obj1.y < obj2.y + obj2.height &&
                obj1.y + obj1.height > obj2.y
            );
        }
    
        function endGame() {
            clearInterval(gameInterval);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = "30px Arial";
            ctx.fillText("Game Over", canvas.width / 2 - 100, canvas.height / 2 - 15);
            document.querySelector("button").disabled = false;
        }
    
        function changeCar() {
            car.symbol = document.getElementById("carSelect").value;
        }
    
        // Listen for window resize events
        window.addEventListener("resize", function () {
            if (gameInterval) {
                clearInterval(gameInterval);
                startGame(); // Restart the game with updated canvas size
            }
        });
    </script>
</body>
</html>
